# Capora - Free Cloud Deployment Guide

Deploy your Capora app to the cloud for **100% FREE** using these services:

## üöÄ Quick Deployment Overview

1. **Backend**: Deploy to Render (Free tier)
2. **Frontend**: Deploy to Vercel (Free tier)
3. **Database**: PostgreSQL on Render (Free tier)

## üìã Prerequisites

- GitHub account
- Render account (free)
- Vercel account (free)

## üîß Step 1: Deploy Backend to Render

### 1.1 Push Code to GitHub
```bash
git add .
git commit -m "Prepare for cloud deployment"
git push origin main
```

### 1.2 Create Render Service
1. Go to [render.com](https://render.com) and sign up/login
2. Click "New +" ‚Üí "Web Service"
3. Connect your GitHub repository
4. Select the `capora` repository
5. Configure the service:
   - **Name**: `capora-backend`
   - **Environment**: `Python`
   - **Build Command**: `cd backend && pip install -r requirements.txt`
   - **Start Command**: `cd backend && python -m uvicorn app.main:app --host 0.0.0.0 --port $PORT`
   - **Plan**: Free

### 1.3 Add Environment Variables
In Render dashboard, add these environment variables:
- `ENVIRONMENT` = `production`
- `SECRET_KEY` = (auto-generated by Render)
- `ALLOWED_ORIGINS` = `https://capora.vercel.app,http://localhost:3000`

### 1.4 Create Database
1. In Render dashboard, click "New +" ‚Üí "PostgreSQL"
2. Configure:
   - **Name**: `capora-db`
   - **Plan**: Free
3. Copy the **External Database URL** for later

### 1.5 Connect Database
1. Go back to your web service
2. Add environment variable:
   - `DATABASE_URL` = (paste the External Database URL)

## üåê Step 2: Deploy Frontend to Vercel

### 2.1 Deploy to Vercel
1. Go to [vercel.com](https://vercel.com) and sign up/login
2. Click "New Project"
3. Import your GitHub repository
4. Configure:
   - **Framework Preset**: Next.js
   - **Root Directory**: `frontend`
   - **Build Command**: `npm run build`
   - **Output Directory**: `.next`

### 2.2 Add Environment Variables
In Vercel dashboard ‚Üí Settings ‚Üí Environment Variables:
- `NEXT_PUBLIC_API_URL` = `https://your-backend-url.onrender.com`

Replace `your-backend-url` with your actual Render backend URL.

### 2.3 Update Backend CORS
1. Go back to Render dashboard
2. Update the `ALLOWED_ORIGINS` environment variable:
   - `ALLOWED_ORIGINS` = `https://your-app.vercel.app,http://localhost:3000`

Replace `your-app` with your actual Vercel app name.

## ‚úÖ Step 3: Verify Deployment

### 3.1 Test Backend
Visit your Render backend URL:
- `https://your-backend-url.onrender.com/health`
- Should return: `{"status": "ok", "service": "Capora API"}`

### 3.2 Test Frontend
Visit your Vercel frontend URL:
- `https://your-app.vercel.app`
- Should load the Capora homepage

### 3.3 Test Full Flow
1. Sign up for a new account
2. Upload a video
3. Generate captions
4. Review processed videos

## üîÑ Automatic Deployments

Both services will automatically redeploy when you push to GitHub:
- **Render**: Redeploys backend on push to `main`
- **Vercel**: Redeploys frontend on push to `main`

## üí∞ Free Tier Limits

### Render Free Tier:
- 750 hours/month (enough for 24/7)
- 512MB RAM
- Sleeps after 15 minutes of inactivity
- PostgreSQL: 1GB storage, 97 connections

### Vercel Free Tier:
- 100GB bandwidth/month
- 1000 serverless function invocations/day
- Unlimited static deployments

## üõ†Ô∏è Troubleshooting

### Backend Issues:
1. Check Render logs in dashboard
2. Verify environment variables are set
3. Ensure database connection is working

### Frontend Issues:
1. Check Vercel function logs
2. Verify API URL is correct
3. Check CORS settings in backend

### Database Issues:
1. Verify DATABASE_URL format
2. Check connection limits (97 max)
3. Monitor storage usage (1GB limit)

## üîß Local Development

To continue developing locally:

```bash
# Backend
cd backend
python -m uvicorn app.main:app --host 0.0.0.0 --port 8080 --reload

# Frontend (new terminal)
cd frontend
npm run dev
```

## üìù Notes

- **Cold Starts**: Render free tier sleeps after 15 minutes. First request may take 30-60 seconds.
- **Database**: PostgreSQL connection limit is 97. App handles this gracefully.
- **File Storage**: Uses temporary storage on Render. Files may be deleted on restart.
- **SSL**: Both Render and Vercel provide free SSL certificates.

## üéâ Your App is Live!

Congratulations! Your Capora app is now running 24/7 in the cloud for free:
- **Frontend**: `https://your-app.vercel.app`
- **Backend**: `https://your-backend-url.onrender.com`
- **Database**: PostgreSQL on Render

Share your app with the world! üåç 